# 行研雷达：逐步完善清单

## 1. 触发层
- [ ] 选定平台（阿里云 FC / AWS Lambda）并创建定时触发器
- [ ] 将 `trigger_layer.py` 适配平台入口签名（event/context）
- [ ] 增加运行日志与异常报警（如邮件/短信/钉钉）

## 2. 采集层
- [ ] 接入新闻 API / 资讯源（雪球、巨潮资讯等）
- [ ] 添加去重逻辑（同标题、同 URL）
- [ ] 增加失败重试与退避策略

## 3. 存储层
- [ ] 替换本地存储为 OSS/S3 SDK
- [ ] 按日期分桶或前缀归档（如 `reports/2026/01/19/`）
- [ ] 增加快照版本索引（最新/历史）

## 4. 增量对比（核心）
- [x] 设计 LLM Prompt（字段、旧值、新值、变化方向）
- [x] 接入 LLM API（Qwen-Max / GPT-4o）
- [ ] 仅持久化变化字段，并保存置信度

## 5. 冲突仲裁
- [x] 完成来源标签体系（官方/媒体/传闻）
- [x] 引入权重与阈值，输出最终结论 + 待核实来源
- [x] 增加冲突报告（Markdown）

## 6. 展示与报告
- [ ] 生成 Markdown 报告
- [ ] 变化字段高亮（上升/下降）
- [ ] 提供简易前端展示（可选）

## 7. 可靠性
- [ ] 采集失败时报警，不覆盖旧数据
- [ ] 全流程异常捕获与重试
- [ ] 日志与可观测性（trace/metrics）

|**状态**|**细分任务**|**备注**|
|---|---|---|
|**已完成**|**语义化指标提取**|支持数值和定性描述的同步提取|
|**已完成**|**全行业通用 Prompt**|已验证可处理半导体、新能源等多行业|
|**已完成**|**权重仲裁逻辑**|实现了“权重最高来源优先”的自动化决策|
|**已完成**|**通俗化分析建议**|将 `reason` 成功包装为“人话”建议|
|**已完成**|**总决策全局汇总**|实现了首席分析师级别的全局综述生成|